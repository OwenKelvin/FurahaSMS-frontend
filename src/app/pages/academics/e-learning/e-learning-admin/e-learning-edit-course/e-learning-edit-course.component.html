<ng-container *ngIf='course$ | async; else loading'>
  <h1>Edit Course <span class="icon-right-dir"></span> {{ course.name }}</h1>
  <table class="table table-dark">
    <tbody>
      <tr>
        <th>Class Level</th>
        <td>{{ course.classLevelName }}({{course.classLevelAbbreviation}})</td>
      </tr>
      <tr>
        <th>Unit/Subject</th>
        <td>{{ course.unitName }}({{ course.unitAbbreviation }})</td>
      </tr>
      <tr>
        <th>Academic Year</th>
        <td>{{ course.academicYearName }}</td>
      </tr>
    </tbody>
  </table>
  <section>
    <h2>Contents</h2>
   <section class="d-flex flex-wrap justify-content-center">
      <section class="col-lg-12 mt-2 mb-3 p-2 card" *ngFor='let topic of course.topics; let i = index'>
        <h3 class="mt-2">{{ course.topicNumberStyleName }} {{ i + 1 }}. {{ topic.description }}</h3>
        <section class="d-flex flex-wrap justify-content-center">
          <section class="col-lg-12 p-2 mb-2">
            <fieldset>
              <legend>Learning Outcomes</legend>
              By End of this {{ course.topicNumberStyleName | lowercase }} you should be able to;
              <ul class="list-group">
                <li class="list-group-item  bg-dark" *ngFor='let learningOutcome of [1, 2, 3, 4]'>
                  <span class='icon-ok-1'></span>
                  Understand the principle of motor Vehicles
                </li>
              </ul>
            </fieldset>
            <section class='card p-2 m-2'>
              <a [routerLink]='["pagenotfound"]' class="p-2">
                <span style="color: salmon;" class="icon-file-pdf"></span>
                PDF Document
              </a>
              <a  [routerLink]='["pagenotfound"]' class="p-2">
                <span style="color: rgb(238, 148, 106);" class="icon-file-powerpoint"></span>
                Power Point Document
              </a>
              <a [routerLink]='["pagenotfound"]' class="p-2">
                <span style="color: springgreen;" class="icon-file-excel"></span>
                Excel Point Document
              </a>
              <a [routerLink]='["pagenotfound"]' class="p-2">
                <span style="color: rgb(138, 196, 243);" class="icon-file-word"></span>
                Word Point Document
              </a>
            </section>
            <div><button class="btn btn-primary btn-sm" type="button">
                <span class="icon-plus-circled"></span>
                New Content</button></div>
          </section>
          <section class="col-lg-12 p-2 mb-2 card" *ngFor='let subTopic of topic.sub_topics; let j = index'>
            <ng-container *ngIf='course.topicNumberStyleName === topic.topic_number_style_name; else normalNumbering'>
              <h4>{{ course.topicNumberStyleName }} {{ i + 1 }}.{{ j + 1 }}. {{ subTopic.description }}</h4>
            </ng-container>
            <ng-template #normalNumbering>
              <h4>{{ topic.topic_number_style_name }} {{ j + 1 }}. {{ subTopic.description }}</h4>
            </ng-template>
            <section class="d-flex justify-content-center">
              <div class="col-lg-12 pb-3">
                
                Some Links Here
                <div><button class="btn btn-primary btn-sm" type="button">
                  <span class="icon-plus-circled"></span>
                  New Content</button></div>
              </div>
            </section>
          </section>
        </section>
      </section>
   </section>
  </section>
  <section class="alert alert-danger d-flex justify-content-around mt-4">
    Action in this Section is irriversable, Be Careful!
    <button (click)='openModal(template)' class="btn btn-danger btn-sm">Delete this Course</button>
  </section>
</ng-container>
<ng-template #loading>
  <h1>Edit Course</h1>
  <app-loading-bubble></app-loading-bubble>
</ng-template>
<ng-template #template>
  <div class="modal-header bg-dark">
    <h4 class="modal-title pull-left">Delete Course Confirmation</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="hideModal()">
      <span aria-hidden="true">&times;</span>

    </button>
  </div>
  <div class="modal-body bg-dark">
    <p class="text-danger">You are about to delete course, Please enter course name to confirm deletion</p>
    <input aria-label="Course Name" type="text" class="form-control" [(ngModel)]='courseNameConfirmation'>
  </div>
  <div class="modal-footer bg-dark">
    <button (click)='modalRef.hide()' class="btn btn-secondary">Cancel</button>
    <button (click)='deleteCourse()' [disabled]='courseNameConfirmation != course.name || deletingCourse' class="btn btn-danger">
      <span *ngIf='!deletingCourse' >Delete this course</span>
      <span *ngIf='deletingCourse' >Deleting...</span>
      <i *ngIf='!deletingCourse' class='icon-trash'></i>
      <i *ngIf='deletingCourse' class='icon-spin3 animate-spin'></i>
    </button>
  </div>
</ng-template>